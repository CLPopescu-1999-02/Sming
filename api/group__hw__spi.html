<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Sming Framework API: SPI Hardware support</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Sming Framework API
   
   </div>
   <div id="projectbrief">Sming - Open Source framework for high efficiency WiFi SoC ESP8266 native development with C++ language.</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__hw__spi.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SPI Hardware support</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides hardware SPI support.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga1cc06a07f3e5b52aec9043f36401dac6">SPIClass::begin</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga1cc06a07f3e5b52aec9043f36401dac6" title="begin(): Initializes the SPI bus by setting SCK, MOSI, and SS to outputs, pulling SCK and MOSI low...">begin()</a>: Initializes the SPI bus by setting SCK, MOSI, and SS to outputs, pulling SCK and MOSI low, and SS high.  <a href="#ga1cc06a07f3e5b52aec9043f36401dac6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga1277bb1fa99673db0a38cdfe31725997">SPIClass::end</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga1277bb1fa99673db0a38cdfe31725997" title="end()">end()</a>  <a href="#ga1277bb1fa99673db0a38cdfe31725997"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c">SPIClass::beginTransaction</a> (<a class="el" href="classSPISettings.html">SPISettings</a> mySettings)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c" title="beginTransaction()">beginTransaction()</a>  <a href="#ga0fe57c499412b23dc0030005129ab72c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga314cc5fade88ae0385812a110ba041dc">SPIClass::endTransaction</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga314cc5fade88ae0385812a110ba041dc" title="endTransaction()">endTransaction()</a>  <a href="#ga314cc5fade88ae0385812a110ba041dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga0701976a831f9cae78ba386f326e3616">SPIClass::transfer</a> (unsigned char val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga0701976a831f9cae78ba386f326e3616" title="transfer()">transfer()</a>  <a href="#ga0701976a831f9cae78ba386f326e3616"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga58425a5802e4a4b2b4b7ff0d19aaaac7">SPIClass::read8</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga58425a5802e4a4b2b4b7ff0d19aaaac7" title="read8() read a byte from SPI without setting up registers">read8()</a> read a byte from SPI without setting up registers  <a href="#ga58425a5802e4a4b2b4b7ff0d19aaaac7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga7453fccb6465fb72ed62f043f327e7ca">SPIClass::transfer16</a> (unsigned short val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga7453fccb6465fb72ed62f043f327e7ca" title="transfer16()">transfer16()</a>  <a href="#ga7453fccb6465fb72ed62f043f327e7ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#ga0053673662dfac3b5f45dc25d010b462">SPIClass::transfer</a> (uint8 *buffer, size_t numberBytes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__hw__spi.html#ga0053673662dfac3b5f45dc25d010b462" title="transfer(uint8 *buffer, size_t numberBytes)">transfer(uint8 *buffer, size_t numberBytes)</a>  <a href="#ga0053673662dfac3b5f45dc25d010b462"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSPISettings.html">SPISettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hw__spi.html#gaec151e634b063831968d5c1abdad59d4">SPIClass::SPIDefaultSettings</a> = <a class="el" href="classSPISettings.html">SPISettings</a>(4000000, MSBFIRST, SPI_MODE0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default settings used by the SPI bus until reset by <a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c" title="beginTransaction()">beginTransaction(SPISettings)</a>  <a href="#gaec151e634b063831968d5c1abdad59d4"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Provides hardware SPI support. </p>
<p>Instantiate hardware SPI object. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga1cc06a07f3e5b52aec9043f36401dac6"></a><!-- doxytag: member="SPIClass::begin" ref="ga1cc06a07f3e5b52aec9043f36401dac6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="group__hw__spi.html#ga1cc06a07f3e5b52aec9043f36401dac6">SPIClass::begin</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga1cc06a07f3e5b52aec9043f36401dac6" title="begin(): Initializes the SPI bus by setting SCK, MOSI, and SS to outputs, pulling SCK and MOSI low...">begin()</a>: Initializes the SPI bus by setting SCK, MOSI, and SS to outputs, pulling SCK and MOSI low, and SS high. </p>

<p>Implements <a class="el" href="group__base__spi.html#gafbeadd11a2371ae16ff98c367c1b80dc">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga0fe57c499412b23dc0030005129ab72c"></a><!-- doxytag: member="SPIClass::beginTransaction" ref="ga0fe57c499412b23dc0030005129ab72c" args="(SPISettings mySettings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c">SPIClass::beginTransaction</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSPISettings.html">SPISettings</a>&#160;</td>
          <td class="paramname"><em>mySettings</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c" title="beginTransaction()">beginTransaction()</a> </p>
<p>Initializes the SPI bus using the defined <a class="el" href="classSPISettings.html">SPISettings</a></p>
<p>this methode does not initiate a transaction. So it can be used to setup the SPI after SPI.begin() </p>

<p>Implements <a class="el" href="group__base__spi.html#gad5fd61e67423191ce0bc9a0e3e8bd5c4">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga1277bb1fa99673db0a38cdfe31725997"></a><!-- doxytag: member="SPIClass::end" ref="ga1277bb1fa99673db0a38cdfe31725997" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="group__hw__spi.html#ga1277bb1fa99673db0a38cdfe31725997">SPIClass::end</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga1277bb1fa99673db0a38cdfe31725997" title="end()">end()</a> </p>
<p>Method for compatibility with Arduino API. Provides NOP </p>

<p>Implements <a class="el" href="group__base__spi.html#ga9c11c8bd1a7be8104e1a004c0e964fe4">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga314cc5fade88ae0385812a110ba041dc"></a><!-- doxytag: member="SPIClass::endTransaction" ref="ga314cc5fade88ae0385812a110ba041dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="group__hw__spi.html#ga314cc5fade88ae0385812a110ba041dc">SPIClass::endTransaction</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga314cc5fade88ae0385812a110ba041dc" title="endTransaction()">endTransaction()</a> </p>
<p>Method for compatibility with Arduino API. Provides NOP</p>
<p><a class="el" href="group__hw__spi.html#ga314cc5fade88ae0385812a110ba041dc" title="endTransaction()">endTransaction()</a>: Stop using the SPI bus. Normally this is called after de-asserting the chip select, to allow other libraries to use the SPI bus. </p>

<p>Implements <a class="el" href="group__base__spi.html#gad2aec733277dc8c94a00e660d79a84f2">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga58425a5802e4a4b2b4b7ff0d19aaaac7"></a><!-- doxytag: member="SPIClass::read8" ref="ga58425a5802e4a4b2b4b7ff0d19aaaac7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 <a class="el" href="group__hw__spi.html#ga58425a5802e4a4b2b4b7ff0d19aaaac7">SPIClass::read8</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga58425a5802e4a4b2b4b7ff0d19aaaac7" title="read8() read a byte from SPI without setting up registers">read8()</a> read a byte from SPI without setting up registers </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">byte</td><td>received</td></tr>
  </table>
  </dd>
</dl>
<p>used for performance tuning when doing continuous reads this method does not reset the registers , so make sure that a regular transfer(data) call was performed</p>
<p>Note: this method is not found on the Arduino API</p>
<p>USE WITH CARE !! </p>

</div>
</div>
<a class="anchor" id="ga0701976a831f9cae78ba386f326e3616"></a><!-- doxytag: member="SPIClass::transfer" ref="ga0701976a831f9cae78ba386f326e3616" args="(unsigned char val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual unsigned char <a class="el" href="group__hw__spi.html#ga0701976a831f9cae78ba386f326e3616">SPIClass::transfer</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga0701976a831f9cae78ba386f326e3616" title="transfer()">transfer()</a> </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">byte</td><td>to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">byte</td><td>received</td></tr>
  </table>
  </dd>
</dl>
<p>calls private method transfer32(byte) to send/recv one uint32_t input/output casted to rightdta type</p>
<p>SPI transfer is based on a simultaneous send and receive: the received data is returned in receivedVal (or receivedVal16).</p>
<p>receivedVal = SPI.transfer(val) : single byte receivedVal16 = SPI.transfer16(val16) : single short </p>

<p>Implements <a class="el" href="group__base__spi.html#ga40f6c5273d46c59daa4ddfe4afb48c17">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga0053673662dfac3b5f45dc25d010b462"></a><!-- doxytag: member="SPIClass::transfer" ref="ga0053673662dfac3b5f45dc25d010b462" args="(uint8 *buffer, size_t numberBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="group__hw__spi.html#ga0701976a831f9cae78ba386f326e3616">SPIClass::transfer</a> </td>
          <td>(</td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numberBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga0053673662dfac3b5f45dc25d010b462" title="transfer(uint8 *buffer, size_t numberBytes)">transfer(uint8 *buffer, size_t numberBytes)</a> </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>in/out </td></tr>
    <tr><td class="paramname">numberBytes</td><td>lenght of buffer</td></tr>
  </table>
  </dd>
</dl>
<p>SPI transfer is based on a simultaneous send and receive: The buffered transfers does split up the conversation internaly into 64 byte blocks. The received data is stored in the buffer passed by reference. (the data past in is replaced with the data received).</p>
<p>SPI.transfer(buffer, size) : memory buffer of length size </p>

<p>Implements <a class="el" href="classSPIBase.html">SPIBase</a>.</p>

</div>
</div>
<a class="anchor" id="ga7453fccb6465fb72ed62f043f327e7ca"></a><!-- doxytag: member="SPIClass::transfer16" ref="ga7453fccb6465fb72ed62f043f327e7ca" args="(unsigned short val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual unsigned short <a class="el" href="group__hw__spi.html#ga7453fccb6465fb72ed62f043f327e7ca">SPIClass::transfer16</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__hw__spi.html#ga7453fccb6465fb72ed62f043f327e7ca" title="transfer16()">transfer16()</a> </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">short</td><td>to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">short</td><td>received</td></tr>
  </table>
  </dd>
</dl>
<p>calls private method transfer32(byte) to send/recv one uint32_t input/output casted to rightdta type</p>
<p>SPI transfer is based on a simultaneous send and receive: the received data is returned in receivedVal (or receivedVal16).</p>
<p>receivedVal = SPI.transfer(val) : single byte receivedVal16 = SPI.transfer16(val16) : single short </p>

<p>Implements <a class="el" href="classSPIBase.html">SPIBase</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gaec151e634b063831968d5c1abdad59d4"></a><!-- doxytag: member="SPIClass::SPIDefaultSettings" ref="gaec151e634b063831968d5c1abdad59d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSPISettings.html">SPISettings</a> <a class="el" href="group__hw__spi.html#gaec151e634b063831968d5c1abdad59d4">SPIClass::SPIDefaultSettings</a> = <a class="el" href="classSPISettings.html">SPISettings</a>(4000000, MSBFIRST, SPI_MODE0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default settings used by the SPI bus until reset by <a class="el" href="group__hw__spi.html#ga0fe57c499412b23dc0030005129ab72c" title="beginTransaction()">beginTransaction(SPISettings)</a> </p>
<p>Note: not included in std Arduino lib </p>

<p>Reimplemented from <a class="el" href="classSPIBase.html">SPIBase</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
